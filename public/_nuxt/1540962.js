(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{613:function(e,t,n){"use strict";n.r(t);var l=n(421),o=n(220),r=n(413),c=n(412),d=n(459),m=n(426),h=n(608),f=n(499),v=n(415),k=n(199),I=n(469),y=n(424),_=n(475),x=n(53),C=n(160);n(26),n(221),n(31),n(4),n(9),n(25),n(172),n(41),n(59),n(39),n(10),n(60),n(65),n(40);function T(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return w(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,l=function(){};return{s:l,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:l}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,r=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return r=e.done,e},e:function(e){c=!0,o=e},f:function(){try{r||null==n.return||n.return()}finally{if(c)throw o}}}}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var D={data:function(){return{input_video:null,input_image:null,uploadVideoUrl:"",uploadImageUrl:"",TgtFile:null,search:"",dialog:!1,dialogDelete:!1,headers:[{text:"機械番号",align:"start",sortable:!1,value:"machine",width:"7%"},{text:"計画台数",value:"KeikakuDai",width:"6%"},{text:"残業（時）",value:"ZangyouJikan",width:"5%"},{text:"担当者",value:"tantousha",width:"10%"},{text:"CycleTime（分）",value:"CTm",width:"7%"},{text:"CycleTime（秒）",value:"CTs",width:"7%"},{text:"備考",value:"bikou"},{text:"Actions",value:"actions",sortable:!1}],machines:[],machinesRensou:{},editedIndex:-1,editedItem:{machine:"",tantousha:"",CTm:0,CTs:0,bikou:"",KeikakuDai:0,ZangyouJikan:0},defaultItem:{machine:"",tantousha:"",CTm:0,CTs:0,bikou:""},postData:{thumbnail:"",thumbnailName:""},thumbnail:"",thumbnailName:""}},computed:{formTitle:function(){return-1===this.editedIndex?"新規登録":"登録内容編集　"}},watch:{dialog:function(e){e||this.close()},dialogDelete:function(e){e||this.closeDelete()}},created:function(){this.FireStoreGet()},methods:{changeImg:function(e){var t=this;try{if(e.target.files[0].size>1e6?console.log("やばいよ。やばいよ"):console.log("オッケーだよ"),this.thumbnail=e.target.files[0],this.thumbnailName=e.target.files[0].name,console.log(this.thumbnai),console.log(this.thumbnailName),this.thumbnail){var n=new FileReader;n.onload=function(){t.postData.thumbnail=n.result+""},n.readAsDataURL(this.thumbnail),console.log("選択完了")}}catch(e){console.log(e)}},onImagePicked:function(e){var t=this;if(null!=e){if(e.name.lastIndexOf(".")<=0)return;var n=new FileReader;this.thumbnailName=n.name,console.log("名前は"+n.name),n.readAsDataURL(e),n.addEventListener("load",(function(){t.uploadImageUrl=n.result,console.log(t.uploadImageUrl)}))}else this.uploadImageUrl=""},submitImg:function(e){var t=this.$fire.storage,n="imagesX/"+this.editedItem.machine+".jpg";t.ref().child(n).put(e).then((function(e){return console.log(e)})).catch((function(e){return console.log(e)}))},initialize:function(){},FireStoreGet:function(){var e=this;this.machines=[];this.$fire.firestore.collection("machines").get().then((function(t){t.forEach((function(t){e.machinesRensou[t.id]=[t.data()],e.machines.push(Object.assign({machine:t.id},t.data()))}))}))},FireStoreSet:function(){var e,t=this.$fire.firestore.collection("machines"),n=T(this.machines);try{for(n.s();!(e=n.n()).done;){var l=e.value;for(var o in l){var r=0;null!=l.KeikakuDai&&(r=l.KeikakuDai);var c=0;null!=l.ZangyouJikan&&(c=l.ZangyouJikan),t.doc(l.machine).set({tantousha:l.tantousha,CTm:l.CTm,CTs:l.CTs,bikou:l.bikou,KeikakuDai:r,ZangyouJikan:c});var d=l.machine,m=60*Number(l.CTm)+Number(l.CTs);this.$store.commit("timeBank/CycleTimeByouArrySet",{TgtMachine:d,CycleTimeByou:m})}}}catch(e){n.e(e)}finally{n.f()}},editItem:function(e){this.thumbnail="",this.thumbnailName="",this.editedIndex=this.machines.indexOf(e),this.editedItem=Object.assign({},e),this.dialog=!0},deleteItem:function(e){this.editedIndex=this.machines.indexOf(e),this.editedItem=Object.assign({},e),this.dialogDelete=!0},deleteItemConfirm:function(){this.machines.splice(this.editedIndex,1),this.closeDelete()},close:function(){var e=this;this.dialog=!1,this.$nextTick((function(){e.editedItem=Object.assign({},e.defaultItem),e.editedIndex=-1}))},closeDelete:function(){var e=this;this.dialogDelete=!1,this.$nextTick((function(){e.editedItem=Object.assign({},e.defaultItem),e.editedIndex=-1}))},save:function(){this.editedIndex>-1?Object.assign(this.machines[this.editedIndex],this.editedItem):this.machines.push(this.editedItem),""==this.thumbnail?console.log("サムネールは空だよ"):(this.submitImg(this.thumbnail),this.changeImg(),this.thumbnail="",this.thumbnailName=""),this.close()}}},S=n(62),component=Object(S.a)(D,(function(){var e=this,t=e._self._c;return t("dir",[t(l.a,[t(m.a,[t(h.a,{staticClass:"elevation-5",attrs:{headers:e.headers,items:e.machines,search:e.search,"sort-by":"calories"},scopedSlots:e._u([{key:"top",fn:function(){return[t(x.a,{attrs:{flat:""}},[t(C.a,[e._v("機械の編集")]),e._v(" "),t(y.a),e._v(" "),t(_.a,{attrs:{"append-icon":"mdi-magnify",label:"検索","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),e._v(" "),t(v.a,{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),e._v(" "),t(y.a),e._v(" "),t(f.a,{attrs:{"max-width":"500px"},scopedSlots:e._u([{key:"activator",fn:function(n){var l=n.on,r=n.attrs;return[t(o.a,e._g(e._b({staticClass:"mb-2",attrs:{color:"primary",dark:""}},"v-btn",r,!1),l),[e._v("\n            追加\n          ")])]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[e._v(" "),t(r.a,[t(c.c,[t("span",{staticClass:"headline"},[e._v(e._s(e.formTitle))]),e._v(" "),t("img",{attrs:{src:n(289),width:"15%"}})]),e._v(" "),t(c.b,[t(m.a,[t(I.a,[t(d.a,{attrs:{cols:"12",sm:"6",md:"4"}},[t(_.a,{attrs:{label:"機械番号"},model:{value:e.editedItem.machine,callback:function(t){e.$set(e.editedItem,"machine",t)},expression:"editedItem.machine"}}),e._v(" "),t(_.a,{attrs:{label:"計画台数"},model:{value:e.editedItem.KeikakuDai,callback:function(t){e.$set(e.editedItem,"KeikakuDai",t)},expression:"editedItem.KeikakuDai"}}),e._v(" "),t(_.a,{attrs:{label:"残業（時間）"},model:{value:e.editedItem.ZangyouJikan,callback:function(t){e.$set(e.editedItem,"ZangyouJikan",t)},expression:"editedItem.ZangyouJikan"}})],1),e._v(" "),t(d.a,{attrs:{cols:"12",sm:"6",md:"4"}},[t(_.a,{attrs:{label:"担当者"},model:{value:e.editedItem.tantousha,callback:function(t){e.$set(e.editedItem,"tantousha",t)},expression:"editedItem.tantousha"}})],1)],1),e._v(" "),t(I.a,[t(d.a,{attrs:{cols:"12"}},[t(_.a,{attrs:{label:"備考"},model:{value:e.editedItem.bikou,callback:function(t){e.$set(e.editedItem,"bikou",t)},expression:"editedItem.bikou"}})],1)],1),e._v(" "),t(I.a,[t(d.a,{attrs:{cols:"6",sm:"4",md:"2"}},[t(_.a,{attrs:{label:"CycleTime分"},model:{value:e.editedItem.CTm,callback:function(t){e.$set(e.editedItem,"CTm",t)},expression:"editedItem.CTm"}})],1),e._v(" "),t(d.a,{attrs:{cols:"12",sm:"6",md:"4"}},[t(_.a,{attrs:{label:"CycleTime秒"},model:{value:e.editedItem.CTs,callback:function(t){e.$set(e.editedItem,"CTs",t)},expression:"editedItem.CTs"}})],1)],1),e._v(" "),t("form",{staticClass:"form",on:{submit:function(t){return t.preventDefault(),e.submitImg()}}},[t("input",{attrs:{type:"file",accept:"img/*"},on:{change:e.changeImg}})]),e._v(" "),t("dir",{attrs:{width:"50px"}},[t("img",{attrs:{src:e.postData.thumbnail,alt:"",width:"100%"}})])],1)],1),e._v(" "),t(c.a,[t(y.a),e._v(" "),t(o.a,{attrs:{color:"blue darken-1",text:""},on:{click:e.close}},[e._v("\n              キャンセル\n            ")]),e._v(" "),t(o.a,{attrs:{color:"blue darken-1",text:""},on:{click:e.save}},[e._v("\n               保存\n            ")])],1)],1)],1),e._v(" "),t(f.a,{attrs:{"max-width":"500px"},model:{value:e.dialogDelete,callback:function(t){e.dialogDelete=t},expression:"dialogDelete"}},[t(r.a,[t(c.c,{staticClass:"headline"},[e._v("Are you sure you want to delete this item?")]),e._v(" "),t(c.a,[t(y.a),e._v(" "),t(o.a,{attrs:{color:"blue darken-1",text:""},on:{click:e.closeDelete}},[e._v("Cancel")]),e._v(" "),t(o.a,{attrs:{color:"blue darken-1",text:""},on:{click:e.deleteItemConfirm}},[e._v("OK")]),e._v(" "),t(y.a)],1)],1)],1)],1)]},proxy:!0},{key:"item.actions",fn:function(n){var l=n.item;return[t(k.a,{staticClass:"mr-2",attrs:{small:""},on:{click:function(t){return e.editItem(l)}}},[e._v("\n      mdi-pencil\n    ")]),e._v(" "),t(k.a,{attrs:{small:""},on:{click:function(t){return e.deleteItem(l)}}},[e._v("\n      mdi-delete\n    ")])]}},{key:"no-data",fn:function(){return[t(o.a,{attrs:{color:"primary"},on:{click:e.initialize}},[e._v("\n      Reset\n    ")])]},proxy:!0}])})],1),e._v(" "),t(m.a,[t(o.a,{attrs:{color:"pink"},on:{click:e.FireStoreSet}},[e._v("DB更新")])],1)],1)],1)}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{Img:n(206).default})}}]);